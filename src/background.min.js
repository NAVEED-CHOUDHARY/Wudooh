const onInstalled=async t=>{"update"==t.reason&&tabs.create("https://wudooh.app/updated");let s=await sync.get(keys);const e=[];null==s.textSize&&e.push(sync.set({textSize:defaultTextSize})),null==s.lineHeight&&e.push(sync.set({lineHeight:defaultLineHeight})),null==s.onOff&&e.push(sync.set({onOff:!0})),null==s.font&&e.push(sync.set({font:defaultFont})),null==s.whitelisted&&e.push(sync.set({whitelisted:[]})),null==s.customSettings&&e.push(sync.set({customSettings:[]})),null==s.customFonts&&e.push(sync.set({customFonts:[]})),await Promise.all(e),s=await sync.get(keys),(await tabs.queryAllTabs()).forEach(t=>{if(s.onOff){const s={reason:reasonUpdateAllText};tabs.sendMessage(t.id,s)}})};runtime.onInstalled.hasListener(onInstalled)||runtime.onInstalled.addListener(onInstalled),analytics("/background.html");