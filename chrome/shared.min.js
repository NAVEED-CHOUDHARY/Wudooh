const runtime=chrome.runtime,keyTextSize="textSize",keyLineHeight="lineHeight",keyOnOff="onOff",keyFont="font",keyWhitelisted="whitelisted",keyCustomSettings="customSettings",keyCustomFonts="customFonts",keys=["textSize","lineHeight","onOff","font","whitelisted","customSettings","customFonts"],defaultFont="Droid Arabic Naskh",defaultTextSize=125,defaultLineHeight=145,defaultColor="#880E4F",homePage="http://basshelal.github.io/Wudooh",reasonUpdateAllText="updateAllText",reasonInjectCustomFonts="injectCustomFonts",reasonToggleOff="toggleOff";let htmlEditables=["textarea","input","text","email","number","search","tel","url","password"];const allWudoohFonts=["Droid Arabic Naskh","Noto Naskh Arabic","Arabic Typesetting","Simplified Arabic","Traditional Arabic","Noto Sans Arabic","Noto Kufi Arabic","Aldhabi","Amiri","Amiri Quran","Andalus","Reem Kufi Regular","Scheherazade","Urdu Typesetting","Noto Nastaliq Urdu","Aref Ruqaa","Cairo","Lemonada","Lalezar","Tajawal","Changa","El Messiri","Lateef","Mada","Markazi Text","Mirza","Harmattan","Rakkas","Katibeh","Jomhuria","Shakstah","Mehr Nastaliq","Rooznameh","DecoType Naskh","sans-serif","Times New Roman","Arial","Calibri","Original"];class CustomSettings{constructor(t,e,s,i){this.url=t,this.textSize=e,this.lineHeight=s,this.font=i}static isValidCustomSettings(t){const e=t.url,s=t.textSize,i=t.lineHeight,n=t.font;return!!e&&"string"==typeof e&&!!s&&"number"==typeof s&&s>=100&&s<=300&&!!i&&"number"==typeof i&&i>=100&&i<=300&&!!n&&"string"==typeof n}static isCustomSettings(t){return!!t&&t.hasOwnProperty("url")&&t.hasOwnProperty("textSize")&&t.hasOwnProperty("lineHeight")&&t.hasOwnProperty("font")&&this.isValidCustomSettings(t)}static isCustomSettingsArray(t){return 0===t.length||t.every(t=>this.isCustomSettings(t))}}class CustomFont{constructor(t,e,s){this.fontName=t,this.localName=e,this.url=s}static isFontInstalled(t){var e=document.createElement("span");function s(t){e.style.fontFamily=t,document.body.appendChild(e);let s=e.clientWidth;return document.body.removeChild(e),s}e.innerHTML=Array(100).join("wi"),e.style.cssText=["position:absolute","width:auto","font-size:128px","left:-99999px"].join(" !important;");var i=s("monospace"),n=s("serif"),o=s("sans-serif");return i!==s(t+",monospace")||o!==s(t+",sans-serif")||n!==s(t+",serif")}static isFontUrlValid(t){return fetch(t).then(t=>t.ok)}isFontInstalled(){return CustomFont.isFontInstalled(this.fontName)}isUrlValid(){return this.url?this.url?CustomFont.isFontUrlValid(this.url):void 0:Promise.resolve(!1)}static isValidCustomFont(t){const e=t.fontName,s=t.localName,i=t.url;return!!e&&"string"==typeof e&&!!s&&"string"==typeof s&&!!i&&"string"==typeof i}static isCustomFont(t){return!!t&&t.hasOwnProperty("fontName")&&t.hasOwnProperty("localName")&&t.hasOwnProperty("url")&&this.isValidCustomFont(t)}static isCustomFontsArray(t){return 0===t.length||t.every(t=>this.isCustomFont(t))}}var sync={get:async(t=null)=>new Promise(e=>{chrome.storage.sync.get(t,t=>e(t))}),set:async t=>new Promise(e=>chrome.storage.sync.set(t,()=>e()))},tabs={create:async t=>new Promise(e=>chrome.tabs.create({url:t},t=>e(t))),queryAllTabs:async()=>new Promise(t=>chrome.tabs.query({},e=>t(e))),queryCurrentTab:async()=>new Promise(t=>chrome.tabs.query({active:!0,currentWindow:!0},e=>t(e))),sendMessage(t,e){chrome.tabs.sendMessage(t,e)}};function get(t){return document.getElementById(t)}function wait(t,e){return setTimeout(e,t)}Array.prototype.contains=function(t){return-1!==this.indexOf(t)},String.prototype.contains=function(t){return-1!==this.indexOf(t)},Element.prototype.postDelayed=function(t,e){let s=wait(t,()=>{s===this.currentTask&&e.call(this)});this.currentTask=s};